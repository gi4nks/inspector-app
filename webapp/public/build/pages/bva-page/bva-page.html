<ion-content padding class="bva-page" scroll="false">
<div>
  <header>
    <div class="headerContents">
      <!-- Title -->
      <img class="mobileFirst" src="images/MobileFirstFoundation-icon.png">
      <span class="title"><span style="font-weight: bold">IBM MobileFirst Foundation: </span>Business Value Assessment</span>
      <img class="ibmLogo" src="images/ibm-logo-white.png">
      <button class="moreButton" accent fab (click)="showPopover($event)">
        <ion-icon name="more"></ion-icon>
      </button>
    </div>
  </header>  
  <main class="mainContent">
    <div class="page-content">
      <ion-grid (window:resize)="onResize($event)" >
        <ion-row responsive-lg>
          <ion-col width-50 class="leftColumn" #leftColumn [style.height.px]="columnHeight">
            <ion-card *ngFor="let section of content.sections; let i = index">
              <ion-card-header tappable class="level1" [ngClass]="section.class" (click)="toggleContent(i, $event)">
                {{section.title}}
                <ion-icon *ngIf="!showContent(i)" name="arrow-dropright" ></ion-icon>
                <ion-icon *ngIf="showContent(i)" name="arrow-dropdown"></ion-icon>
                
              </ion-card-header>
              <div [ngClass]="{hidden: !showContent(i)}" class="cardContent">
                <div class="description" [innerHtml]="section.description"></div>
                
                <div *ngFor="let question of section.questions; let n=index" class="question">
                  <div class="slider-single" [ngClass]="{hidden: question.type != 'slider-single'}">
                    <div class="title">{{question.title}}</div>
                    <div class="slider-single-container">
                      <ion-range min="{{question.rangeMin}}" max="{{question.rangeMax}}" step="{{question.step}}" [(ngModel)]="question.value" (ngModelChange)="changed($event)" accent>
                      </ion-range>         
                      <div class="slider-single-value number-single" style="align-items: center">
                        <ion-item>
                          <ion-input type="text" disabled [(ngModel)]="question.value" (ngModelChange)="changed($event)"></ion-input>
                        </ion-item>                        
                      </div>                                 
                    </div>
                  </div>
                  
                  <div [ngClass]="{hidden: question.type != 'radio'}">
                    <div class="title">{{question.title}}</div>
                    <div style="display: flex">
                      <div style="flex-grow: 2" class="radio">
                        <div >

                          <ion-item *ngFor="let option of question.options; let j=index">
                            <!--<ion-radio value="{{option.label}}"></ion-radio>-->
                            <ion-label>{{option.label}}</ion-label>
                            <ion-checkbox accent [(ngModel)]="option.value" (ngModelChange)="changed($event)"></ion-checkbox>
                          </ion-item>
                        </div>                          
                      </div>
                      <div class="number-single" style="align-items: center">
                        <ion-item>
                          <ion-label stacked>% of apps sharing <br/>an environment</ion-label>
                          <ion-input type="text" value="" pattern="-?[0-9]*(\.[0-9]+)?" [(ngModel)]="question.value" (ngModelChange)="changed($event)"></ion-input>
                        </ion-item>                        
                      </div>
                    </div>
                  </div>
                  
              </div>
                  
              <div *ngFor="let subSection of section.subSections; let k=index" class="subSection">
                <ion-card>
                  <ion-card-header tappable (click)="toggleSubContent(k, $event)">{{subSection.title}}
                    <ion-icon *ngIf="!showSubContent(k)" name="arrow-dropright" ></ion-icon>
                    <ion-icon *ngIf="showSubContent(k)" name="arrow-dropdown"></ion-icon>
                  </ion-card-header>
                  
                  <div [ngClass]="{hidden: !showSubContent(k)}" class="cardContent">
                    <div *ngFor="let question of subSection.questions; let m=index" class="question">
                      <div [ngClass]="{hidden: question.type != 'development'}">
                        <ion-item>
                          <ion-label>{{question.title}}</ion-label>
                          <ion-checkbox accent [(ngModel)]="question.active" (ngModelChange)="questionChanged($event, subSection.title, question)"></ion-checkbox>
                        </ion-item>
                        <div class="moreInfoContainer" >
                          <div class="moreInfoTabContainer" tappable [ngClass]="{on: question.showMoreInfo}" (click)="toggleMoreInfo(question, $event)">
                            <span [ngClass]="{hidden: question.showMoreInfo}"><ion-icon class="moreInfoIcon" name="arrow-dropright"></ion-icon> tell me more</span>
                            <span [ngClass]="{hidden: !question.showMoreInfo}"><ion-icon class="moreInfoIcon" name="arrow-dropdown"></ion-icon> tell me less</span>
                          </div>
                          <div class="moreInfoInnerContainer" [ngClass]="{hidden: !question.showMoreInfo}">
                            <div class="moreInfoTextContainer" [innerHtml]="question.moreInfo"></div>
                            <div class="demoPlayButtonColumn" *ngIf="question.demoVideoUrl">
                              <div class="demoPlayButtonContainer" tappable (click)="playDemo(question)">
                                <div class="playIcon"><ion-icon name="play"></ion-icon></div>
                                <div class="playIconLabel">Watch demo</div>
                              </div>  
                            </div>
                          </div>
                        </div>          
                        <ion-grid class="sliderContainer">
                          <ion-row responsive-sm>
                            <ion-col width-33>
                              <div class="slider-triple-container">
                                <div class="label">% of apps that could benefit: <span class="value">{{question.usefulPctValue}} %</span></div>    
                                <ion-range class="slider-single-slider" min="0" max="100" step="5" [(ngModel)]="question.usefulPctValue" (ngModelChange)="changed($event, subSection.title)" accent></ion-range>
                              </div>
                            </ion-col>
                            <ion-col width-33>                            
                              <div class="slider-triple-container">
                                <div class="label">Days to implement this yourself: <span class="value">{{question.daysToImplementValue}}</span></div>
                                <ion-range class="slider-single-slider" min="0" max="60" step="1" [(ngModel)]="question.daysToImplementValue" (ngModelChange)="changed($event, subSection.title)" accent></ion-range>
                              </div>
                            </ion-col>
                            <ion-col width-33>                            
                              <div class="slider-triple-container">
                                <div class="label">% of code reuse across apps: <span class="value">{{question.codeReusePctValue}} %</span></div>
                                <ion-range class="slider-single-slider" min="0" max="100" step="5" [(ngModel)]="question.codeReusePctValue" (ngModelChange)="changed($event, subSection.title)" accent></ion-range>
                              </div>
                            </ion-col>
                          </ion-row>
                          <div class="sliderDisableOverlay" [ngClass]="{hidden: question.active}"></div>
                        </ion-grid>
                      </div>

                      <div [ngClass]="{hidden: question.type != 'operational'}">
                        <ion-item>
                          <ion-label>{{question.title}}</ion-label>
                          <ion-checkbox accent [(ngModel)]="question.active" (ngModelChange)="questionChanged($event, subSection.title, question)"></ion-checkbox>
                        </ion-item>
                          
                        <div class="moreInfoContainer">
                          <div class="moreInfoTabContainer" tappable [ngClass]="{on: question.showMoreInfo}" (click)="toggleMoreInfo(question, $event)">
                            <span [ngClass]="{hidden: question.showMoreInfo}"><ion-icon class="moreInfoIcon" name="arrow-dropright"></ion-icon> tell me more</span>
                            <span [ngClass]="{hidden: !question.showMoreInfo}"><ion-icon class="moreInfoIcon" name="arrow-dropdown"></ion-icon> tell me less</span>
                          </div>    
                          <div class="moreInfoInnerContainer" [ngClass]="{hidden: !question.showMoreInfo}">                  
                            <div class="moreInfoTextContainer" [innerHtml]="question.moreInfo"></div>
                            <div class="demoPlayButtonColumn" *ngIf="question.demoVideoUrl">
                              <div class="demoPlayButtonContainer" tappable (click)="playDemo(question)">
                                <div class="playIcon"><ion-icon name="play"></ion-icon></div>
                                <div class="playIconLabel">Watch demo</div>
                              </div>  
                            </div>
                          </div>
                        </div>                                         
                        <ion-grid class="sliderContainer">
                          <ion-row responsive-sm>
                            <ion-col width-33>
                              <div class="slider-triple-container">
                                <div class="label">Will be needed <span class="value">{{question.howOftenValue}}</span> times per month</div>                        
                                <ion-range class="slider-single-slider" min="0" max="15" step="1" [(ngModel)]="question.howOftenValue" (ngModelChange)="changed($event, subSection.title)" accent>
                                </ion-range>
                              </div>
                            </ion-col>
                            <ion-col width-33>
                              <div class="slider-triple-container">
                                <div class="label">Each time it's needed it will take: <span class="value">{{question.howLongValue}}</span> hours</div>
                                <ion-range class="slider-single-slider" min="0" max="20" step="1" [(ngModel)]="question.howLongValue" (ngModelChange)="changed($event, subSection.title)" accent>
                                </ion-range>
                              </div>
                            </ion-col>
                            <ion-col width-33>
                              <div class="slider-triple-container">
                                <div class="label">With each app this gets: <span class="value">{{question.howComplexPctValue}} %</span> more complex</div>
                                <ion-range class="slider-single-slider" min="0" max="20" step="1" [(ngModel)]="question.howComplexPctValue" (ngModelChange)="changed($event, subSection.title)" accent>
                                </ion-range>
                              </div>
                            </ion-col>
                          </ion-row>
                          <div class="sliderDisableOverlay" [ngClass]="{hidden: question.active}"></div>
                        </ion-grid>
                        
                      </div>  
                      <hr *ngIf="m != subSection.questions.length-1">    
                    </div>
                  </div>                  
                </ion-card>
              </div>
                
              
            </div>
          </ion-card>

          </ion-col>
          <ion-col width-50>
            <ion-card class="resultsCard">
              <ion-card-header class="results">4. The Value of IBM MobileFirst Foundation</ion-card-header>
              <div class="cardContent">
                <div class="title">Expected Savings from using IBM MobileFirst Foundation</div>
                <div id="chartContainer">
                  <!--<chart [options]="options" (load)="saveInstance($event.context)"></chart>-->
                  <results-chart [chartData]="chartData"></results-chart>
                </div>
              </div>
              <div class="totalFooter" id="totalFooter">
                <!--<span class="totalTitle">Total expected savings:</span> <span class="totalValue">{{getTotalExpectedSavings() | currency:'USD':true:'1.0-0' }}</span>-->
                <span class="totalTitle">Total expected savings:</span> <span class="totalValue">{{getTotalExpectedSavings() | currency:'USD':true:'1.0-0' }}</span>
              </div>            
            </ion-card>             
          </ion-col>
        </ion-row>
      </ion-grid>      
          
    </div>
  </main>

</div>
</ion-content>
